2025-10-28 00:00:09.901 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 00:00:09.924 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 22.8458ms
2025-10-28 00:00:09.975 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 00:00:09.978 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 3.0670ms
2025-10-28 00:00:10.213 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 00:00:10.239 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 26.3774ms
2025-10-28 00:00:24.374 +05:00 [INF] Application is shutting down...
2025-10-28 00:00:32.715 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:00:33.318 +05:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:00:33.488 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:00:33.512 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:00:33.538 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:00:33.755 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:00:33.877 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:00:34.023 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:00:34.028 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:00:34.030 +05:00 [INF] Hosting environment: Production
2025-10-28 00:00:34.031 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:00:36.583 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 00:00:36.690 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 110.6439ms
2025-10-28 00:00:36.711 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 00:00:36.714 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.7372ms
2025-10-28 00:00:36.805 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 00:00:36.938 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 133.4610ms
2025-10-28 00:00:52.598 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 00:00:52.736 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:00:52.763 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:00:52.780 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:00:52.857 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:00:52.920 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:00:52.939 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 170.229ms
2025-10-28 00:00:52.942 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:00:52.946 +05:00 [INF] HTTP GET /api/Flights responded 200 in 332.8977 ms
2025-10-28 00:00:52.952 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 353.9601ms
2025-10-28 00:01:11.325 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 00:01:11.329 +05:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Moderator)
2025-10-28 00:01:11.332 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 00:01:11.334 +05:00 [INF] HTTP POST /api/Flights responded 403 in 7.0651 ms
2025-10-28 00:01:11.335 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 403 0 - 10.4465ms
2025-10-28 00:01:32.470 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 145
2025-10-28 00:01:32.474 +05:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Moderator)
2025-10-28 00:01:32.476 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 00:01:32.477 +05:00 [INF] HTTP POST /api/Flights responded 403 in 5.6837 ms
2025-10-28 00:01:32.479 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 145 - 403 0 - 8.7210ms
2025-10-28 00:05:47.135 +05:00 [INF] Application is shutting down...
2025-10-28 00:05:54.103 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:05:54.562 +05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:05:54.620 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:05:54.647 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:05:54.671 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:05:54.883 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:05:54.999 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:05:55.085 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:05:55.089 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:05:55.090 +05:00 [INF] Hosting environment: Production
2025-10-28 00:05:55.091 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:06:04.332 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 145
2025-10-28 00:06:04.484 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Post (AirAstana.Presentation)'
2025-10-28 00:06:04.510 +05:00 [INF] Route matched with {action = "Post", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Post(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:06:04.575 +05:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 00:06:04.588 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Post (AirAstana.Presentation) in 72.5975ms
2025-10-28 00:06:04.590 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Post (AirAstana.Presentation)'
2025-10-28 00:06:04.592 +05:00 [INF] HTTP POST /api/Flights responded 400 in 218.7410 ms
2025-10-28 00:06:04.597 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 145 - 400 - application/json;+charset=utf-8 268.0395ms
2025-10-28 00:47:06.235 +05:00 [INF] Application is shutting down...
2025-10-28 00:47:18.473 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:47:19.004 +05:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:47:19.176 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:47:19.201 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:47:19.229 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:47:19.474 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:47:19.602 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:47:19.700 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:47:19.705 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:47:19.706 +05:00 [INF] Hosting environment: Production
2025-10-28 00:47:19.707 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:47:27.815 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 00:47:27.939 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 126.9642ms
2025-10-28 00:47:28.090 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 00:47:28.092 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.0047ms
2025-10-28 00:47:28.801 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 00:47:28.951 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 149.8808ms
2025-10-28 00:47:42.200 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63
2025-10-28 00:47:42.259 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:47:42.263 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:47:42.268 +05:00 [ERR] HTTP POST /api/Auth/register responded 500 in 60.4051 ms
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-28 00:47:42.343 +05:00 [ERR] Connection id "0HNGLI6KAT8RJ", Request id "0HNGLI6KAT8RJ:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-28 00:47:42.357 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63 - 500 0 - 156.6465ms
2025-10-28 00:47:49.482 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63
2025-10-28 00:47:49.485 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:47:49.487 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:47:49.490 +05:00 [ERR] HTTP POST /api/Auth/register responded 500 in 5.1689 ms
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-28 00:47:49.501 +05:00 [ERR] Connection id "0HNGLI6KAT8RK", Request id "0HNGLI6KAT8RK:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-28 00:47:49.516 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63 - 500 0 - 33.5556ms
2025-10-28 00:50:47.965 +05:00 [INF] Application is shutting down...
2025-10-28 00:50:55.319 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:50:55.933 +05:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:50:56.096 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:50:56.119 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:50:56.145 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:50:56.382 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:50:56.526 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:50:56.625 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:50:56.629 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:50:56.631 +05:00 [INF] Hosting environment: Production
2025-10-28 00:50:56.631 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:51:00.409 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 00:51:00.533 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 127.0412ms
2025-10-28 00:51:00.643 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 00:51:00.646 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.6127ms
2025-10-28 00:51:00.867 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 00:51:01.011 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 143.9179ms
2025-10-28 00:51:05.930 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65
2025-10-28 00:51:05.988 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:51:05.993 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:51:05.997 +05:00 [ERR] HTTP POST /api/Auth/register responded 500 in 61.1874 ms
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-28 00:51:06.055 +05:00 [ERR] Connection id "0HNGLI8JMDFEK", Request id "0HNGLI8JMDFEK:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-28 00:51:06.072 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65 - 500 0 - 142.4452ms
2025-10-28 00:51:17.082 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65
2025-10-28 00:51:17.085 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:51:17.086 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:51:17.087 +05:00 [ERR] HTTP POST /api/Auth/register responded 500 in 3.1706 ms
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-28 00:51:17.093 +05:00 [ERR] Connection id "0HNGLI8JMDFEL", Request id "0HNGLI8JMDFEL:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'AirAstana.Presentation.Filters.GlobalExceptionFilter' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at Microsoft.AspNetCore.Mvc.TypeFilterAttribute.CreateInstance(IServiceProvider serviceProvider)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.ProvideFilter(FilterProviderContext context, FilterItem filterItem)
   at Microsoft.AspNetCore.Mvc.Filters.DefaultFilterProvider.OnProvidersExecuting(FilterProviderContext context)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.CreateUncachedFiltersCore(IFilterProvider[] filterProviders, ActionContext actionContext, List`1 filterItems)
   at Microsoft.AspNetCore.Mvc.Filters.FilterFactory.GetAllFilters(IFilterProvider[] filterProviders, ActionContext actionContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvokerCache.GetCachedResult(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Routing.ControllerRequestDelegateFactory.<>c__DisplayClass12_0.<CreateRequestDelegate>b__0(HttpContext context)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-28 00:51:17.100 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65 - 500 0 - 17.6841ms
2025-10-28 00:53:01.791 +05:00 [INF] Application is shutting down...
2025-10-28 00:53:08.628 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:53:09.151 +05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:53:09.211 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:53:09.232 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:53:09.254 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:53:09.463 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:53:09.556 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:53:09.630 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:53:09.634 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:53:09.635 +05:00 [INF] Hosting environment: Production
2025-10-28 00:53:09.635 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:53:12.241 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65
2025-10-28 00:53:12.311 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:53:12.342 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 00:53:12.406 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:53:12.564 +05:00 [INF] Executed DbCommand (22ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 00:53:12.582 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Code"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-10-28 00:53:12.938 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 00:53:12.990 +05:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 00:53:13.002 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 654.8173ms
2025-10-28 00:53:13.004 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:53:13.007 +05:00 [INF] HTTP POST /api/Auth/register responded 201 in 724.0455 ms
2025-10-28 00:53:13.015 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 65 - 201 - application/json;+charset=utf-8 777.2645ms
2025-10-28 00:53:36.163 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63
2025-10-28 00:53:36.167 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:53:36.169 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 00:53:36.220 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:53:36.227 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 00:53:36.231 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Code"
FROM "Roles" AS r
WHERE r."Code" = 'User'
LIMIT 1
2025-10-28 00:53:36.395 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 00:53:36.399 +05:00 [INF] Executing CreatedResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 00:53:36.401 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 229.7376ms
2025-10-28 00:53:36.402 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 00:53:36.403 +05:00 [INF] HTTP POST /api/Auth/register responded 201 in 236.4079 ms
2025-10-28 00:53:36.405 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63 - 201 - application/json;+charset=utf-8 242.4337ms
2025-10-28 00:53:45.703 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48
2025-10-28 00:53:45.708 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 00:53:45.716 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 00:53:45.726 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:53:45.730 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 00:53:45.901 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Id" = @__user_Id_0
LIMIT 1
2025-10-28 00:53:45.934 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.DTOs.AuthResponse'.
2025-10-28 00:53:45.936 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 218.8523ms
2025-10-28 00:53:45.937 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 00:53:45.938 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 232.9274 ms
2025-10-28 00:53:45.939 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48 - 200 - application/json;+charset=utf-8 236.2272ms
2025-10-28 00:54:05.517 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 00:54:05.590 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:54:05.596 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:54:05.607 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Presentation.Controllers.FlightsController.Get(String origin, String destination, Nullable`1 departureFrom, Nullable`1 departureTo, Nullable`1 status) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 39
   at lambda_method101(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 00:54:05.661 +05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 00:54:05.663 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 64.9203ms
2025-10-28 00:54:05.664 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:54:05.665 +05:00 [ERR] HTTP GET /api/Flights responded 500 in 138.1133 ms
2025-10-28 00:54:05.666 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 500 - application/json;+charset=utf-8 149.3875ms
2025-10-28 00:57:43.443 +05:00 [INF] Application is shutting down...
2025-10-28 00:57:59.190 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:57:59.839 +05:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:58:00.012 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 00:58:00.034 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 00:58:00.060 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 00:58:00.269 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 00:58:00.384 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 00:58:00.500 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 00:58:00.505 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 00:58:00.507 +05:00 [INF] Hosting environment: Production
2025-10-28 00:58:00.508 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 00:58:05.145 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 00:58:05.306 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:05.333 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:05.366 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:05.454 +05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:05.525 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:05.567 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 229.107ms
2025-10-28 00:58:05.569 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:05.573 +05:00 [INF] HTTP GET /api/Flights responded 200 in 373.7613 ms
2025-10-28 00:58:05.581 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 439.2378ms
2025-10-28 00:58:13.607 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?origin=ALA - -
2025-10-28 00:58:13.611 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:13.612 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:13.673 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:13.679 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:13.682 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:13.683 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 69.7423ms
2025-10-28 00:58:13.685 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:13.694 +05:00 [INF] HTTP GET /api/Flights responded 200 in 84.4849 ms
2025-10-28 00:58:13.697 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?origin=ALA - - - 200 - application/json;+charset=utf-8 89.6108ms
2025-10-28 00:58:22.236 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?destination=KUL - -
2025-10-28 00:58:22.241 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:22.242 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:22.250 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:22.254 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:22.257 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:22.259 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 13.8192ms
2025-10-28 00:58:22.261 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:22.262 +05:00 [INF] HTTP GET /api/Flights responded 200 in 24.3457 ms
2025-10-28 00:58:22.264 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?destination=KUL - - - 200 - application/json;+charset=utf-8 28.1881ms
2025-10-28 00:58:32.017 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2025-10-28T00%3A42%3A07.684848%2B00%3A00 - -
2025-10-28 00:58:32.019 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:32.020 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:32.024 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:32.026 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:32.029 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:32.030 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 8.646ms
2025-10-28 00:58:32.031 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:32.033 +05:00 [INF] HTTP GET /api/Flights responded 200 in 14.2781 ms
2025-10-28 00:58:32.035 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2025-10-28T00%3A42%3A07.684848%2B00%3A00 - - - 200 - application/json;+charset=utf-8 17.8459ms
2025-10-28 00:58:40.157 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2026-10-28T00%3A42%3A07.684848%2B00%3A00 - -
2025-10-28 00:58:40.158 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:40.160 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:40.162 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:40.165 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:40.168 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:40.170 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 8.1481ms
2025-10-28 00:58:40.172 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:40.173 +05:00 [INF] HTTP GET /api/Flights responded 200 in 14.5091 ms
2025-10-28 00:58:40.175 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2026-10-28T00%3A42%3A07.684848%2B00%3A00 - - - 200 - application/json;+charset=utf-8 17.8880ms
2025-10-28 00:58:48.869 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2025-10-28T00%3A42%3A07.684848%2B00%3A00 - -
2025-10-28 00:58:48.871 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:48.872 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:48.876 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:48.878 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 2.5787ms
2025-10-28 00:58:48.879 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:48.880 +05:00 [INF] HTTP GET /api/Flights responded 200 in 9.8913 ms
2025-10-28 00:58:48.882 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureFrom=2025-10-28T00%3A42%3A07.684848%2B00%3A00 - - - 200 - application/json;+charset=utf-8 13.1423ms
2025-10-28 00:58:58.183 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2025-10-28T04%3A42%3A07.684849%2B00%3A00 - -
2025-10-28 00:58:58.184 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:58.185 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:58:58.191 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:58:58.206 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:58:58.209 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:58:58.211 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 23.5741ms
2025-10-28 00:58:58.213 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:58:58.214 +05:00 [INF] HTTP GET /api/Flights responded 200 in 29.9031 ms
2025-10-28 00:58:58.217 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2025-10-28T04%3A42%3A07.684849%2B00%3A00 - - - 200 - application/json;+charset=utf-8 33.5817ms
2025-10-28 00:59:06.786 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=1 - -
2025-10-28 00:59:06.788 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:06.789 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:06.798 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-28 00:59:06.801 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 10.7545ms
2025-10-28 00:59:06.803 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:06.804 +05:00 [INF] HTTP GET /api/Flights responded 400 in 16.3215 ms
2025-10-28 00:59:06.805 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=1 - - - 400 - application/problem+json;+charset=utf-8 18.6135ms
2025-10-28 00:59:16.128 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2027-10-28T04%3A42%3A07.684849%2B00%3A00 - -
2025-10-28 00:59:16.129 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:16.130 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:16.135 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:59:16.138 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:59:16.140 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:16.142 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 8.8459ms
2025-10-28 00:59:16.143 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:16.144 +05:00 [INF] HTTP GET /api/Flights responded 200 in 15.3934 ms
2025-10-28 00:59:16.146 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2027-10-28T04%3A42%3A07.684849%2B00%3A00 - - - 200 - application/json;+charset=utf-8 18.5058ms
2025-10-28 00:59:18.884 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2027-10-28T04%3A42%3A07.684849%2B00%3A00 - -
2025-10-28 00:59:18.885 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:18.887 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:18.890 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:18.891 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 1.813ms
2025-10-28 00:59:18.893 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:18.894 +05:00 [INF] HTTP GET /api/Flights responded 200 in 8.8675 ms
2025-10-28 00:59:18.897 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2027-10-28T04%3A42%3A07.684849%2B00%3A00 - - - 200 - application/json;+charset=utf-8 12.8514ms
2025-10-28 00:59:31.879 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2024-10-28T04%3A42%3A07.684849%2B00%3A00 - -
2025-10-28 00:59:31.881 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:31.882 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:31.885 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:59:31.888 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:59:31.891 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:31.893 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 9.0166ms
2025-10-28 00:59:31.895 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:31.896 +05:00 [INF] HTTP GET /api/Flights responded 200 in 16.0276 ms
2025-10-28 00:59:31.898 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?departureTo=2024-10-28T04%3A42%3A07.684849%2B00%3A00 - - - 200 - application/json;+charset=utf-8 19.3041ms
2025-10-28 00:59:35.055 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 00:59:35.057 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:35.058 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:35.061 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:35.063 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 2.3024ms
2025-10-28 00:59:35.065 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:35.066 +05:00 [INF] HTTP GET /api/Flights responded 200 in 9.4059 ms
2025-10-28 00:59:35.068 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 12.2632ms
2025-10-28 00:59:43.632 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 00:59:43.634 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:43.635 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:43.637 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:59:43.640 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:59:43.644 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:43.645 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 8.6579ms
2025-10-28 00:59:43.647 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:43.648 +05:00 [INF] HTTP GET /api/Flights responded 200 in 14.4213 ms
2025-10-28 00:59:43.649 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 16.8460ms
2025-10-28 00:59:47.927 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=0 - -
2025-10-28 00:59:47.928 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:47.930 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:47.933 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:59:47.935 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:59:47.938 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:47.939 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 7.5858ms
2025-10-28 00:59:47.941 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:47.942 +05:00 [INF] HTTP GET /api/Flights responded 200 in 14.0209 ms
2025-10-28 00:59:47.943 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=0 - - - 200 - application/json;+charset=utf-8 16.6910ms
2025-10-28 00:59:52.179 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=2 - -
2025-10-28 00:59:52.181 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:52.182 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 00:59:52.185 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 00:59:52.187 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 00:59:52.190 +05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 00:59:52.191 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 7.3571ms
2025-10-28 00:59:52.193 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 00:59:52.194 +05:00 [INF] HTTP GET /api/Flights responded 200 in 13.9837 ms
2025-10-28 00:59:52.196 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=2 - - - 200 - application/json;+charset=utf-8 17.0325ms
2025-10-28 01:00:11.264 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:00:11.266 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:00:11.270 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:00:11.272 +05:00 [INF] HTTP POST /api/Flights responded 403 in 7.0887 ms
2025-10-28 01:00:11.274 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 10.3798ms
2025-10-28 01:00:21.913 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 01:00:21.965 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 52.6425ms
2025-10-28 01:00:22.024 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 01:00:22.026 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.2422ms
2025-10-28 01:00:22.214 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 01:00:22.334 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.9066ms
2025-10-28 01:00:32.189 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48
2025-10-28 01:00:32.192 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 01:00:32.197 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 01:00:32.217 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:00:32.306 +05:00 [INF] Executed DbCommand (12ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 01:00:32.505 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Id" = @__user_Id_0
LIMIT 1
2025-10-28 01:00:32.515 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.DTOs.AuthResponse'.
2025-10-28 01:00:32.517 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 318.4867ms
2025-10-28 01:00:32.518 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 01:00:32.519 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 328.7273 ms
2025-10-28 01:00:32.522 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48 - 200 - application/json;+charset=utf-8 332.4953ms
2025-10-28 01:00:58.451 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:00:58.452 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:00:58.453 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:00:58.454 +05:00 [INF] HTTP POST /api/Flights responded 403 in 2.3350 ms
2025-10-28 01:00:58.456 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 4.7269ms
2025-10-28 01:01:11.377 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:01:11.378 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:01:11.379 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:01:11.381 +05:00 [INF] HTTP POST /api/Flights responded 403 in 2.9921 ms
2025-10-28 01:01:11.389 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 12.3600ms
2025-10-28 01:02:01.356 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:02:01.358 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:02:01.360 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:02:01.362 +05:00 [INF] HTTP POST /api/Flights responded 403 in 4.4118 ms
2025-10-28 01:02:01.364 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 7.5864ms
2025-10-28 01:02:02.009 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:02:02.010 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:02:02.011 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:02:02.012 +05:00 [INF] HTTP POST /api/Flights responded 403 in 2.4883 ms
2025-10-28 01:02:02.014 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 4.9865ms
2025-10-28 01:02:03.908 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 01:02:03.909 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 1.5977ms
2025-10-28 01:02:03.936 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 01:02:03.937 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 1.1289ms
2025-10-28 01:02:04.118 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 01:02:04.124 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 6.4396ms
2025-10-28 01:02:15.826 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48
2025-10-28 01:02:15.828 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 01:02:15.829 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 01:02:15.833 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:02:15.837 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 01:02:16.011 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Id" = @__user_Id_0
LIMIT 1
2025-10-28 01:02:16.013 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.DTOs.AuthResponse'.
2025-10-28 01:02:16.014 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 182.5323ms
2025-10-28 01:02:16.016 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 01:02:16.017 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 188.4161 ms
2025-10-28 01:02:16.018 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 48 - 200 - application/json;+charset=utf-8 192.3041ms
2025-10-28 01:02:48.228 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:02:48.230 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=role and Claim.Value is one of the following values: (Moderator)
2025-10-28 01:02:48.231 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 01:02:48.232 +05:00 [INF] HTTP POST /api/Flights responded 403 in 2.9274 ms
2025-10-28 01:02:48.235 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 403 0 - 6.5615ms
2025-10-28 01:06:49.405 +05:00 [INF] Application is shutting down...
2025-10-28 01:06:57.300 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:06:57.931 +05:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:06:58.093 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:06:58.119 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:06:58.146 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:06:58.375 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:06:58.497 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:06:58.602 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:06:58.608 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:06:58.609 +05:00 [INF] Hosting environment: Production
2025-10-28 01:06:58.610 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:07:02.478 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:07:02.641 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:07:02.668 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:07:02.744 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Presentation.Controllers.FlightsController.Create(AddFlightCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 48
   at lambda_method8(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 01:07:02.832 +05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 01:07:02.847 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 172.6884ms
2025-10-28 01:07:02.850 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:07:02.853 +05:00 [ERR] HTTP POST /api/Flights responded 500 in 329.8300 ms
2025-10-28 01:07:02.858 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 500 - application/json;+charset=utf-8 382.6935ms
2025-10-28 01:09:07.858 +05:00 [INF] Application is shutting down...
2025-10-28 01:09:14.560 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:09:15.065 +05:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:09:15.127 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:09:15.152 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:09:15.179 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:09:15.405 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:09:15.548 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:09:15.659 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:09:15.662 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:09:15.664 +05:00 [INF] Hosting environment: Production
2025-10-28 01:09:15.665 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:09:23.743 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:09:23.944 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:09:23.993 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:09:24.114 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:09:24.447 +05:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 01:09:24.593 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:09:24.618 +05:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2025-10-28 01:09:24.657 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 655.9978ms
2025-10-28 01:09:24.660 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:09:24.664 +05:00 [INF] HTTP POST /api/Flights responded 201 in 864.9295 ms
2025-10-28 01:09:24.675 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 201 - application/json;+charset=utf-8 935.6339ms
2025-10-28 01:11:14.968 +05:00 [INF] Application is shutting down...
2025-10-28 01:11:21.983 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:11:22.681 +05:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:11:22.742 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:11:22.769 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:11:22.798 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:11:23.034 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:11:23.161 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:11:23.269 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:11:23.273 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:11:23.274 +05:00 [INF] Hosting environment: Production
2025-10-28 01:11:23.275 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:11:26.870 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:11:27.033 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:11:27.063 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:11:27.197 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[FluentValidation.Results.ValidationFailure, FluentValidation, Version=11.0.0.0, Culture=neutral, PublicKeyToken=7de548da2fbae0f0],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 01:11:27.213 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 142.88ms
2025-10-28 01:11:27.215 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:11:27.218 +05:00 [INF] HTTP POST /api/Flights responded 400 in 301.5126 ms
2025-10-28 01:11:27.222 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 400 - application/json;+charset=utf-8 355.6309ms
2025-10-28 01:13:28.957 +05:00 [INF] Application is shutting down...
2025-10-28 01:13:35.078 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:13:35.514 +05:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:13:35.576 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:13:35.598 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:13:35.621 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:13:35.839 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:13:35.950 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:13:36.031 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:13:36.035 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:13:36.036 +05:00 [INF] Hosting environment: Production
2025-10-28 01:13:36.037 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:13:50.673 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:13:50.820 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:13:50.849 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:13:50.960 +05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[FluentValidation.Results.ValidationFailure, FluentValidation, Version=11.0.0.0, Culture=neutral, PublicKeyToken=7de548da2fbae0f0],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 01:13:50.976 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 120.1086ms
2025-10-28 01:13:50.978 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:13:50.981 +05:00 [INF] HTTP POST /api/Flights responded 400 in 263.6059 ms
2025-10-28 01:13:50.986 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 400 - application/json;+charset=utf-8 316.5055ms
2025-10-28 01:13:59.710 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 01:13:59.713 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:13:59.715 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Int32]] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:13:59.744 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:13:59.939 +05:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 01:14:00.047 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:14:00.063 +05:00 [INF] Executing CreatedAtActionResult, writing value of type 'System.Int32'.
2025-10-28 01:14:00.090 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 374.1765ms
2025-10-28 01:14:00.092 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 01:14:00.095 +05:00 [INF] HTTP POST /api/Flights responded 201 in 383.1271 ms
2025-10-28 01:14:00.100 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 201 - application/json;+charset=utf-8 390.0078ms
2025-10-28 01:14:27.932 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/1/status application/json 34
2025-10-28 01:14:27.937 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:14:27.944 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:14:27.986 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.UpdateFlightStatusCommand,System.Boolean]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at AirAstana.Presentation.Controllers.FlightsController.UpdateStatus(Int32 id, UpdateFlightStatusCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 59
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 01:14:28.083 +05:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 01:14:28.086 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 140.2394ms
2025-10-28 01:14:28.088 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:14:28.089 +05:00 [ERR] HTTP PATCH /api/Flights/1/status responded 500 in 155.8984 ms
2025-10-28 01:14:28.091 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/1/status application/json 34 - 500 - application/json;+charset=utf-8 159.5813ms
2025-10-28 01:15:26.511 +05:00 [INF] Application is shutting down...
2025-10-28 01:15:33.220 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:15:33.912 +05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:15:33.975 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:15:33.998 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:15:34.025 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:15:34.265 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:15:34.390 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:15:34.487 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:15:34.492 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:15:34.494 +05:00 [INF] Hosting environment: Production
2025-10-28 01:15:34.495 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:15:42.934 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/1/status application/json 34
2025-10-28 01:15:43.102 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:15:43.131 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:15:43.238 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:15:43.360 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 01:15:43.531 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 01:15:43.576 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:15:43.590 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-28 01:15:43.596 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 458.9359ms
2025-10-28 01:15:43.599 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:15:43.603 +05:00 [INF] HTTP PATCH /api/Flights/1/status responded 204 in 619.3842 ms
2025-10-28 01:15:43.613 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/1/status application/json 34 - 204 - - 681.6626ms
2025-10-28 01:16:32.608 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34
2025-10-28 01:16:32.612 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:16:32.614 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:16:32.669 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:16:32.676 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 01:16:32.680 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 01:16:32.684 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:16:32.687 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-28 01:16:32.688 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 72.1854ms
2025-10-28 01:16:32.689 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:16:32.690 +05:00 [INF] HTTP PATCH /api/Flights/4/status responded 204 in 79.4215 ms
2025-10-28 01:16:32.692 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34 - 204 - - 83.7160ms
2025-10-28 01:17:21.216 +05:00 [INF] Application is shutting down...
2025-10-28 01:17:28.056 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:17:28.511 +05:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:17:28.565 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:17:28.586 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:17:28.612 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:17:28.821 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:17:28.921 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:17:28.987 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:17:28.991 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:17:28.991 +05:00 [INF] Hosting environment: Production
2025-10-28 01:17:28.992 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:17:52.783 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34
2025-10-28 01:17:52.928 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:17:52.954 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:17:53.065 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:17:53.182 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 01:17:53.361 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 01:17:53.403 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:17:53.415 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-28 01:17:53.425 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 462.4819ms
2025-10-28 01:17:53.427 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:17:53.432 +05:00 [INF] HTTP PATCH /api/Flights/4/status responded 204 in 606.5106 ms
2025-10-28 01:17:53.446 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34 - 204 - - 666.2017ms
2025-10-28 01:18:12.251 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34
2025-10-28 01:18:12.255 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:18:12.256 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:18:12.310 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:18:12.315 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 01:18:12.319 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 01:18:12.322 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 01:18:12.326 +05:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-10-28 01:18:12.327 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 68.9202ms
2025-10-28 01:18:12.327 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:18:12.329 +05:00 [INF] HTTP PATCH /api/Flights/4/status responded 204 in 75.1234 ms
2025-10-28 01:18:12.330 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/4/status application/json 34 - 204 - - 79.0501ms
2025-10-28 01:19:21.879 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/6/status application/json 34
2025-10-28 01:19:21.887 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:19:21.888 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 01:19:21.897 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:19:21.902 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 01:19:21.911 +05:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 01:19:21.921 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 30.775ms
2025-10-28 01:19:21.922 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 01:19:21.923 +05:00 [INF] HTTP PATCH /api/Flights/6/status responded 404 in 40.7981 ms
2025-10-28 01:19:21.925 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/6/status application/json 34 - 404 - application/json;+charset=utf-8 45.2819ms
2025-10-28 01:46:35.651 +05:00 [INF] Application is shutting down...
2025-10-28 01:46:49.598 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:46:50.150 +05:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:46:50.215 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:46:50.239 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:46:50.265 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:46:50.495 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:46:50.615 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:46:50.709 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:46:50.713 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:46:50.714 +05:00 [INF] Hosting environment: Production
2025-10-28 01:46:50.714 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:51:21.214 +05:00 [INF] Application is shutting down...
2025-10-28 01:51:29.324 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:51:29.857 +05:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:51:29.916 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:51:29.939 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:51:29.965 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:51:30.192 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:51:30.325 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:51:30.625 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:51:30.631 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:51:30.633 +05:00 [INF] Hosting environment: Production
2025-10-28 01:51:30.634 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:51:34.079 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 01:51:34.213 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 136.6368ms
2025-10-28 01:51:34.360 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 01:51:34.362 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.4724ms
2025-10-28 01:51:34.678 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 01:51:34.815 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.5945ms
2025-10-28 01:51:47.623 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63
2025-10-28 01:51:47.688 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:51:47.719 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 01:51:47.804 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 01:51:47.821 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 95.5746ms
2025-10-28 01:51:47.823 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:51:47.826 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 195.0277 ms
2025-10-28 01:51:47.829 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 63 - 200 - application/json;+charset=utf-8 205.6546ms
2025-10-28 01:52:00.102 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 01:52:00.106 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:52:00.107 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 01:52:00.128 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.RegisterUserCommand,AirAstana.Application.DTOs.RegisterUserResult]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 01:52:00.247 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 01:52:00.248 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 138.9217ms
2025-10-28 01:52:00.249 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:52:00.250 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 144.4538 ms
2025-10-28 01:52:00.251 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 148.8347ms
2025-10-28 01:54:06.634 +05:00 [INF] Application is shutting down...
2025-10-28 01:54:17.558 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:54:18.160 +05:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:54:18.214 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 01:54:18.235 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 01:54:18.257 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 01:54:18.478 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 01:54:18.577 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 01:54:18.649 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 01:54:18.653 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 01:54:18.654 +05:00 [INF] Hosting environment: Production
2025-10-28 01:54:18.656 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 01:54:39.351 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 01:54:39.480 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:54:39.505 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 01:54:39.603 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 01:54:39.770 +05:00 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 01:54:40.143 +05:00 [ERR] Failed executing DbCommand (31ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 01:54:40.188 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'AirAstana.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-28 01:54:40.207 +05:00 [ERR] Unhandled exception occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AirAstana.Infrastructure.Repositories.UserRepository.AddAsync(User user) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Infrastructure\Repositories\UserRepository.cs:line 18
   at AirAstana.Application.Commands.Handler.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Commands\Handler\RegisterUserCommandHandler.cs:line 42
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at AirAstana.Presentation.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 01:54:40.288 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 01:54:40.310 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 798.7462ms
2025-10-28 01:54:40.313 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 01:54:40.317 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 880.1140 ms
2025-10-28 01:54:40.326 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 977.6111ms
2025-10-28 02:01:20.000 +05:00 [INF] Application is shutting down...
2025-10-28 02:01:37.402 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:01:38.025 +05:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:01:38.198 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:01:38.221 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:01:38.244 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:01:38.542 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:01:38.677 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:01:38.945 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:01:38.949 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:01:38.950 +05:00 [INF] Hosting environment: Production
2025-10-28 02:01:38.951 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:01:44.681 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 02:01:44.786 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:01:44.823 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:01:44.994 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:01:45.223 +05:00 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:01:45.575 +05:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:01:45.647 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'AirAstana.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-28 02:01:45.664 +05:00 [ERR] Unhandled exception occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AirAstana.Infrastructure.Repositories.UserRepository.AddAsync(User user) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Infrastructure\Repositories\UserRepository.cs:line 18
   at AirAstana.Application.Commands.Handler.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Commands\Handler\RegisterUserCommandHandler.cs:line 42
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at AirAstana.Presentation.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:01:45.748 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:01:45.771 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 939.5651ms
2025-10-28 02:01:45.773 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:01:45.776 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 1052.4594 ms
2025-10-28 02:01:45.786 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 1108.8583ms
2025-10-28 02:03:37.696 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 02:03:37.703 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:03:37.706 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:03:37.770 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:03:37.779 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:03:37.944 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:03:37.995 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:03:38.000 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 292.4262ms
2025-10-28 02:03:38.002 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:03:38.003 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 302.1263 ms
2025-10-28 02:03:38.006 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 313.1456ms
2025-10-28 02:03:51.551 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 02:03:51.555 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:03:51.556 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:03:51.564 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:03:51.569 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:03:51.742 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:03:51.746 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:03:51.748 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 189.6907ms
2025-10-28 02:03:51.750 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:03:51.751 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 197.8304 ms
2025-10-28 02:03:51.752 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 201.1187ms
2025-10-28 02:04:15.328 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:04:15.330 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:04:15.337 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:04:15.352 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:04:15.359 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:04:15.360 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 21.3295ms
2025-10-28 02:04:15.361 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:04:15.364 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 34.2423 ms
2025-10-28 02:04:15.366 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 37.7107ms
2025-10-28 02:07:06.891 +05:00 [INF] Application is shutting down...
2025-10-28 02:07:13.017 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:07:13.528 +05:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:07:13.701 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:07:13.722 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:07:13.746 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:07:13.964 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:07:14.114 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:07:14.221 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:07:14.224 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:07:14.225 +05:00 [INF] Hosting environment: Production
2025-10-28 02:07:14.226 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:07:17.740 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67
2025-10-28 02:07:17.916 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:07:17.973 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:07:18.134 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:07:18.384 +05:00 [INF] Executed DbCommand (29ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:07:18.507 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:07:18.540 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 558.1078ms
2025-10-28 02:07:18.544 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:07:18.549 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 701.4247 ms
2025-10-28 02:07:18.560 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 67 - 200 - application/json;+charset=utf-8 828.4556ms
2025-10-28 02:07:23.973 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:07:23.976 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:23.982 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:07:24.003 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:07:24.092 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:07:24.096 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 111.8113ms
2025-10-28 02:07:24.098 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:24.099 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 123.4610 ms
2025-10-28 02:07:24.101 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 128.5905ms
2025-10-28 02:07:27.947 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 02:07:28.006 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 58.7804ms
2025-10-28 02:07:28.102 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 02:07:28.104 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 1.4726ms
2025-10-28 02:07:28.387 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 02:07:28.534 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.1909ms
2025-10-28 02:07:33.130 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:07:33.145 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:33.146 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:07:33.154 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:07:33.160 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:07:33.161 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 12.8969ms
2025-10-28 02:07:33.163 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:33.164 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 32.7098 ms
2025-10-28 02:07:33.165 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 35.0362ms
2025-10-28 02:07:37.129 +05:00 [INF] Application is shutting down...
2025-10-28 02:07:43.213 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:07:43.646 +05:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:07:43.702 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:07:43.721 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:07:43.742 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:07:43.945 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:07:44.041 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:07:44.109 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:07:44.112 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:07:44.113 +05:00 [INF] Hosting environment: Production
2025-10-28 02:07:44.114 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:07:49.061 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:07:49.179 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:49.216 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:07:49.333 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:07:49.367 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:07:49.389 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 164.8656ms
2025-10-28 02:07:49.391 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:07:49.394 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 283.7540 ms
2025-10-28 02:07:49.400 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 341.2097ms
2025-10-28 02:09:41.470 +05:00 [INF] Application is shutting down...
2025-10-28 02:09:50.736 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:09:51.335 +05:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:09:51.496 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:09:51.541 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:09:51.616 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:09:51.938 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:09:52.062 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:09:52.168 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:09:52.171 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:09:52.172 +05:00 [INF] Hosting environment: Production
2025-10-28 02:09:52.173 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:09:55.108 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:09:55.185 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:09:55.215 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:09:55.277 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:09:55.350 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:09:55.374 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 151.5322ms
2025-10-28 02:09:55.376 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:09:55.379 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 227.6724 ms
2025-10-28 02:09:55.385 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 279.5373ms
2025-10-28 02:10:05.269 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 02:10:05.328 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 58.7383ms
2025-10-28 02:10:05.420 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 02:10:05.422 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 2.5348ms
2025-10-28 02:10:05.669 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 02:10:05.808 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 139.3648ms
2025-10-28 02:10:10.555 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:10:10.559 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:10:10.560 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:10:10.564 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Handler was not found for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
   at MediatR.Internal.RequestHandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, CancellationToken cancellationToken, RequestHandlerDelegate`1 next) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Internal.RequestHandlerWrapperImpl`2.<>c.<Handle>b__0_0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:10:10.570 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:10:10.572 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 10.098ms
2025-10-28 02:10:10.573 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:10:10.574 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 15.7490 ms
2025-10-28 02:10:10.576 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 20.5930ms
2025-10-28 02:14:18.912 +05:00 [INF] Application is shutting down...
2025-10-28 02:44:49.893 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:44:50.630 +05:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:44:50.689 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:44:50.715 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:44:50.741 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:44:51.049 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:44:51.187 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:44:51.319 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:44:51.324 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:44:51.325 +05:00 [INF] Hosting environment: Production
2025-10-28 02:44:51.325 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:44:55.524 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:44:55.710 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:44:55.761 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:44:55.923 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:44:56.065 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:44:56.114 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 338.9414ms
2025-10-28 02:44:56.117 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:44:56.124 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 522.2356 ms
2025-10-28 02:44:56.135 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 615.3363ms
2025-10-28 02:47:04.539 +05:00 [INF] Application is shutting down...
2025-10-28 02:47:10.890 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:47:11.642 +05:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:47:11.801 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:47:11.824 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:47:11.852 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:47:12.087 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:47:12.195 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:47:12.284 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:47:12.289 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:47:12.289 +05:00 [INF] Hosting environment: Production
2025-10-28 02:47:12.290 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:47:15.515 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52
2025-10-28 02:47:15.597 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:47:15.629 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:47:15.700 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.LoginUserCommand,System.String]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:47:15.755 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:47:15.778 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 141.8351ms
2025-10-28 02:47:15.781 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:47:15.783 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 223.6909 ms
2025-10-28 02:47:15.788 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 52 - 200 - application/json;+charset=utf-8 276.2662ms
2025-10-28 02:48:23.529 +05:00 [INF] Application is shutting down...
2025-10-28 02:48:29.599 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:48:30.235 +05:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:48:30.405 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:48:30.436 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:48:30.467 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:48:30.693 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:48:30.801 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:48:30.875 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:48:30.879 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:48:30.880 +05:00 [INF] Hosting environment: Production
2025-10-28 02:48:30.881 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:48:39.757 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71
2025-10-28 02:48:39.841 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:39.875 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:48:39.972 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:48:40.131 +05:00 [INF] Executed DbCommand (24ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:48:40.545 +05:00 [ERR] Failed executing DbCommand (29ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:48:40.590 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'AirAstana.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-28 02:48:40.617 +05:00 [ERR] Unhandled exception occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AirAstana.Infrastructure.Repositories.UserRepository.AddAsync(User user) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Infrastructure\Repositories\UserRepository.cs:line 18
   at AirAstana.Application.Commands.Handler.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Commands\Handler\RegisterUserCommandHandler.cs:line 42
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at AirAstana.Presentation.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 22
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:48:40.708 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:48:40.734 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 851.3985ms
2025-10-28 02:48:40.736 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:40.740 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 938.4128 ms
2025-10-28 02:48:40.750 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71 - 200 - application/json;+charset=utf-8 995.9575ms
2025-10-28 02:48:45.981 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71
2025-10-28 02:48:45.987 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:45.990 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:48:46.047 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:48:46.055 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:48:46.220 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:48:46.262 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:48:46.266 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 273.8478ms
2025-10-28 02:48:46.269 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:46.270 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 284.1072 ms
2025-10-28 02:48:46.272 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71 - 200 - application/json;+charset=utf-8 291.1344ms
2025-10-28 02:48:53.479 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71
2025-10-28 02:48:53.484 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:53.486 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:48:53.501 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:48:53.507 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:48:53.526 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:48:53.528 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 39.4691ms
2025-10-28 02:48:53.530 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:53.532 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 50.9122 ms
2025-10-28 02:48:53.534 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71 - 200 - application/json;+charset=utf-8 55.0714ms
2025-10-28 02:48:59.489 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71
2025-10-28 02:48:59.490 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:59.491 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:48:59.495 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:48:59.499 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:48:59.665 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 02:48:59.668 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:48:59.669 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 175.8677ms
2025-10-28 02:48:59.671 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 02:48:59.671 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 181.2693 ms
2025-10-28 02:48:59.673 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71 - 200 - application/json;+charset=utf-8 183.9836ms
2025-10-28 02:49:13.248 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 56
2025-10-28 02:49:13.249 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:49:13.264 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:49:13.273 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:49:13.276 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:49:13.516 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:49:13.518 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 252.3187ms
2025-10-28 02:49:13.520 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:49:13.521 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 272.0379 ms
2025-10-28 02:49:13.523 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 274.8703ms
2025-10-28 02:49:22.975 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 57
2025-10-28 02:49:22.976 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:49:22.978 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 02:49:22.981 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:49:22.985 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 02:49:23.148 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:49:23.149 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 168.7376ms
2025-10-28 02:49:23.150 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 02:49:23.151 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 174.6269 ms
2025-10-28 02:49:23.152 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 57 - 200 - application/json;+charset=utf-8 177.1863ms
2025-10-28 02:49:37.807 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 02:49:37.882 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:49:37.886 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:49:37.895 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Get(String origin, String destination, Nullable`1 departureFrom, Nullable`1 departureTo, Nullable`1 status) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:49:37.902 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:49:37.903 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 15.9633ms
2025-10-28 02:49:37.905 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:49:37.906 +05:00 [INF] HTTP GET /api/Flights responded 200 in 87.9758 ms
2025-10-28 02:49:37.908 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 100.7329ms
2025-10-28 02:51:00.008 +05:00 [INF] Application is shutting down...
2025-10-28 02:51:08.567 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:51:09.224 +05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:51:09.392 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:51:09.414 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:51:09.439 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:51:09.667 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:51:09.777 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:51:09.855 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:51:09.860 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:51:09.862 +05:00 [INF] Hosting environment: Production
2025-10-28 02:51:09.862 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:51:12.894 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 02:51:13.171 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:51:13.218 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:51:13.277 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Get(String origin, String destination, Nullable`1 departureFrom, Nullable`1 departureTo, Nullable`1 status) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:51:13.344 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:51:13.389 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 163.2921ms
2025-10-28 02:51:13.391 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:51:13.394 +05:00 [INF] HTTP GET /api/Flights responded 200 in 419.4838 ms
2025-10-28 02:51:13.400 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 511.6649ms
2025-10-28 02:53:38.979 +05:00 [INF] Application is shutting down...
2025-10-28 02:53:46.949 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:53:47.525 +05:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:53:47.595 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:53:47.620 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:53:47.647 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:53:47.867 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:53:47.968 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:53:48.042 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:53:48.047 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:53:48.048 +05:00 [INF] Hosting environment: Production
2025-10-28 02:53:48.049 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:53:52.162 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 02:53:52.349 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:53:52.386 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:53:52.445 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Queries.GetFlightsQuery,System.Collections.Generic.List`1[AirAstana.Application.DTOs.FlightDto]]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Get(String origin, String destination, Nullable`1 departureFrom, Nullable`1 departureTo, Nullable`1 status) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 02:53:52.512 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 02:53:52.544 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 151.9942ms
2025-10-28 02:53:52.546 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:53:52.549 +05:00 [INF] HTTP GET /api/Flights responded 200 in 321.3177 ms
2025-10-28 02:53:52.554 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 395.2470ms
2025-10-28 02:55:03.900 +05:00 [INF] Application is shutting down...
2025-10-28 02:55:10.150 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:55:10.712 +05:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:55:10.777 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 02:55:10.799 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 02:55:10.823 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 02:55:11.038 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 02:55:11.132 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 02:55:11.204 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 02:55:11.209 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 02:55:11.210 +05:00 [INF] Hosting environment: Production
2025-10-28 02:55:11.211 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 02:55:14.893 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 02:55:15.038 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:15.070 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:55:15.114 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:55:15.197 +05:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 02:55:15.303 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:55:15.352 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 274.1022ms
2025-10-28 02:55:15.353 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:15.356 +05:00 [INF] HTTP GET /api/Flights responded 200 in 413.9700 ms
2025-10-28 02:55:15.365 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 475.0359ms
2025-10-28 02:55:25.136 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT - -
2025-10-28 02:55:25.139 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:25.141 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:55:25.204 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:55:25.211 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 02:55:25.213 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:55:25.215 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 71.8533ms
2025-10-28 02:55:25.216 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:25.217 +05:00 [INF] HTTP GET /api/Flights responded 200 in 78.5947 ms
2025-10-28 02:55:25.219 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT - - - 200 - application/json;+charset=utf-8 82.7076ms
2025-10-28 02:55:36.406 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?destination=AST - -
2025-10-28 02:55:36.413 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:36.415 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:55:36.423 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 02:55:36.428 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 02:55:36.431 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:55:36.432 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 15.1481ms
2025-10-28 02:55:36.434 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:36.435 +05:00 [INF] HTTP GET /api/Flights responded 200 in 26.7789 ms
2025-10-28 02:55:36.438 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?destination=AST - - - 200 - application/json;+charset=utf-8 31.5561ms
2025-10-28 02:55:43.496 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 02:55:43.497 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:43.500 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 02:55:43.503 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 02:55:43.504 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 2.6659ms
2025-10-28 02:55:43.506 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 02:55:43.507 +05:00 [INF] HTTP GET /api/Flights responded 200 in 10.3286 ms
2025-10-28 02:55:43.509 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 13.2451ms
2025-10-28 03:00:31.521 +05:00 [INF] Application is shutting down...
2025-10-28 03:00:40.078 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:00:40.762 +05:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:00:40.932 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:00:40.960 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:00:40.987 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:00:41.245 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:00:41.366 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:00:41.474 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:00:41.479 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:00:41.480 +05:00 [INF] Hosting environment: Production
2025-10-28 03:00:41.481 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:00:45.258 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 03:00:45.524 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:45.574 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:00:45.639 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:00:45.775 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:00:45.877 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:00:45.942 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 361.2792ms
2025-10-28 03:00:45.945 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:45.950 +05:00 [INF] HTTP GET /api/Flights responded 200 in 599.6333 ms
2025-10-28 03:00:45.959 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 708.1377ms
2025-10-28 03:00:53.849 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?destination=CIT - -
2025-10-28 03:00:53.853 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:53.854 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:00:53.916 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:00:53.961 +05:00 [INF] Executed DbCommand (11ms) [Parameters=[@__destination_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Destination" = @__destination_0
ORDER BY f."Arrival"
2025-10-28 03:00:53.963 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:00:53.966 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 109.7472ms
2025-10-28 03:00:53.967 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:53.968 +05:00 [INF] HTTP GET /api/Flights responded 200 in 116.4773 ms
2025-10-28 03:00:53.969 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?destination=CIT - - - 200 - application/json;+charset=utf-8 119.9866ms
2025-10-28 03:00:58.682 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?destination=ALA - -
2025-10-28 03:00:58.690 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:58.692 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:00:58.715 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:00:58.723 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__destination_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Destination" = @__destination_0
ORDER BY f."Arrival"
2025-10-28 03:00:58.726 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:00:58.728 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 34.184ms
2025-10-28 03:00:58.729 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:00:58.731 +05:00 [INF] HTTP GET /api/Flights responded 200 in 45.8605 ms
2025-10-28 03:00:58.733 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?destination=ALA - - - 200 - application/json;+charset=utf-8 50.7127ms
2025-10-28 03:01:09.505 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 03:01:09.507 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:01:09.518 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:01:09.523 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:01:09.542 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__status_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Status" = @__status_Value_0
ORDER BY f."Arrival"
2025-10-28 03:01:09.544 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:01:09.546 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 25.6066ms
2025-10-28 03:01:09.548 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:01:09.549 +05:00 [INF] HTTP GET /api/Flights responded 200 in 42.4530 ms
2025-10-28 03:01:09.551 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 45.9858ms
2025-10-28 03:01:20.063 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 03:01:20.066 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=http://schemas.microsoft.com/ws/2008/06/identity/claims/role and Claim.Value is one of the following values: (Moderator)
2025-10-28 03:01:20.069 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 03:01:20.070 +05:00 [INF] HTTP POST /api/Flights responded 403 in 5.8313 ms
2025-10-28 03:01:20.071 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 403 0 - 8.6777ms
2025-10-28 03:01:49.068 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 56
2025-10-28 03:01:49.070 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:01:49.082 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:01:49.112 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:01:49.168 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:01:49.373 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:01:49.377 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 292.1532ms
2025-10-28 03:01:49.379 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:01:49.380 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 310.4092 ms
2025-10-28 03:01:49.381 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 56 - 200 - application/json;+charset=utf-8 312.7108ms
2025-10-28 03:02:12.084 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 03:02:12.085 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:02:12.086 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:02:12.089 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:02:12.090 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 2.1167ms
2025-10-28 03:02:12.091 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:02:12.093 +05:00 [INF] HTTP GET /api/Flights responded 200 in 7.3461 ms
2025-10-28 03:02:12.094 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 9.5675ms
2025-10-28 03:02:21.766 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:02:21.767 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:02:21.776 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:02:21.859 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:02:21.862 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 82.5145ms
2025-10-28 03:02:21.863 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:02:21.864 +05:00 [INF] HTTP POST /api/Flights responded 200 in 97.2797 ms
2025-10-28 03:02:21.865 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 99.2984ms
2025-10-28 03:02:31.223 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:02:31.225 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:02:31.227 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:02:31.267 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Create(AddFlightCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:02:31.372 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:02:31.373 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 144.0106ms
2025-10-28 03:02:31.374 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:02:31.374 +05:00 [INF] HTTP POST /api/Flights responded 200 in 149.7431 ms
2025-10-28 03:02:31.376 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 152.1751ms
2025-10-28 03:03:42.877 +05:00 [INF] Application is shutting down...
2025-10-28 03:03:52.679 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:03:53.453 +05:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:03:53.549 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:03:53.594 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:03:53.629 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:03:53.936 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:03:54.105 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:03:54.195 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:03:54.199 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:03:54.200 +05:00 [INF] Hosting environment: Production
2025-10-28 03:03:54.201 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:04:15.845 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 69
2025-10-28 03:04:16.008 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:04:16.045 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:04:16.145 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:04:16.294 +05:00 [INF] Executed DbCommand (21ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:04:16.367 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:04:16.393 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 342.408ms
2025-10-28 03:04:16.395 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:04:16.398 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 506.0833 ms
2025-10-28 03:04:16.405 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 69 - 200 - application/json;+charset=utf-8 563.0738ms
2025-10-28 03:04:26.585 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 70
2025-10-28 03:04:26.589 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:04:26.592 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:04:26.648 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:04:26.656 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:04:26.947 +05:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 03:04:26.989 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:04:26.991 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 397.469ms
2025-10-28 03:04:26.992 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:04:26.993 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 404.9967 ms
2025-10-28 03:04:26.994 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 70 - 200 - application/json;+charset=utf-8 408.7834ms
2025-10-28 03:04:44.449 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 55
2025-10-28 03:04:44.455 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:04:44.462 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:04:44.473 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:04:44.477 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:04:44.644 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:04:44.646 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 182.1833ms
2025-10-28 03:04:44.648 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:04:44.648 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 197.1891 ms
2025-10-28 03:04:44.650 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 55 - 200 - application/json;+charset=utf-8 200.8390ms
2025-10-28 03:05:00.507 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 03:05:00.521 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:05:00.526 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:05:00.545 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:05:00.567 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__status_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Status" = @__status_Value_0
ORDER BY f."Arrival"
2025-10-28 03:05:00.586 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:05:00.603 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 75.5704ms
2025-10-28 03:05:00.605 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:05:00.606 +05:00 [INF] HTTP GET /api/Flights responded 200 in 91.4971 ms
2025-10-28 03:05:00.608 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 100.1166ms
2025-10-28 03:05:04.705 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:05:04.707 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:05:04.711 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:05:04.786 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Create(AddFlightCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:05:04.877 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:05:04.880 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 165.7271ms
2025-10-28 03:05:04.882 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:05:04.883 +05:00 [INF] HTTP POST /api/Flights responded 200 in 177.0842 ms
2025-10-28 03:05:04.885 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 180.0539ms
2025-10-28 03:05:07.517 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:05:07.520 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:05:07.522 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:05:07.527 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.AddFlightCommand,System.Int32]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.Create(AddFlightCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:05:07.534 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:05:07.535 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 11.6178ms
2025-10-28 03:05:07.537 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:05:07.538 +05:00 [INF] HTTP POST /api/Flights responded 200 in 20.1491 ms
2025-10-28 03:05:07.539 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 22.5508ms
2025-10-28 03:07:39.209 +05:00 [INF] Application is shutting down...
2025-10-28 03:07:48.141 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:07:48.829 +05:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:07:48.889 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:07:48.913 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:07:48.939 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:07:49.168 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:07:49.286 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:07:49.392 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:07:49.397 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:07:49.398 +05:00 [INF] Hosting environment: Production
2025-10-28 03:07:49.399 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:07:53.119 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:07:53.284 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:07:53.316 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:07:53.450 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:07:53.716 +05:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 03:07:53.820 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:07:53.838 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:07:53.857 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 535.5512ms
2025-10-28 03:07:53.859 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:07:53.862 +05:00 [INF] HTTP POST /api/Flights responded 200 in 699.3248 ms
2025-10-28 03:07:53.869 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 753.6068ms
2025-10-28 03:07:57.186 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144
2025-10-28 03:07:57.190 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:07:57.192 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:07:57.248 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:07:57.253 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 03:07:57.260 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:07:57.262 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:07:57.263 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 70.1437ms
2025-10-28 03:07:57.265 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:07:57.265 +05:00 [INF] HTTP POST /api/Flights responded 200 in 77.5246 ms
2025-10-28 03:07:57.268 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 144 - 200 - application/json;+charset=utf-8 81.9520ms
2025-10-28 03:08:38.175 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34
2025-10-28 03:08:38.180 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:08:38.187 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:08:38.239 +05:00 [ERR] Unhandled exception occurred
System.InvalidOperationException: Error constructing handler for request of type MediatR.IRequestHandler`2[AirAstana.Application.Commands.UpdateFlightStatusCommand,System.Boolean]. Register your handlers with the container. See the samples in GitHub for examples.
 ---> System.InvalidOperationException: No service for type 'MediatR.IRequestHandler`2[AirAstana.Application.Commands.UpdateFlightStatusCommand,System.Boolean]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at MediatR.ServiceFactoryExtensions.GetInstance[T](ServiceFactory factory)
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   --- End of inner exception stack trace ---
   at MediatR.Wrappers.HandlerBase.GetHandler[THandler](ServiceFactory factory)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.<>c__DisplayClass1_0.<Handle>g__Handler|0()
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at MediatR.Wrappers.RequestHandlerWrapperImpl`2.Handle(Object request, ServiceFactory serviceFactory, CancellationToken cancellationToken)
   at AirAstana.Presentation.Controllers.FlightsController.UpdateStatus(Int32 id, UpdateFlightStatusCommand command) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\FlightsController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:08:38.342 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:08:38.346 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 157.5103ms
2025-10-28 03:08:38.347 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:08:38.348 +05:00 [INF] HTTP PATCH /api/Flights/7/status responded 200 in 171.1151 ms
2025-10-28 03:08:38.350 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34 - 200 - application/json;+charset=utf-8 174.3862ms
2025-10-28 03:09:16.874 +05:00 [INF] Application is shutting down...
2025-10-28 03:09:37.741 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:09:38.228 +05:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:09:38.285 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:09:38.307 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:09:38.331 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:09:38.564 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:09:38.701 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:09:38.797 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:09:38.800 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:09:38.801 +05:00 [INF] Hosting environment: Production
2025-10-28 03:09:38.802 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:09:41.637 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34
2025-10-28 03:09:41.801 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:09:41.836 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:09:41.952 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:09:42.074 +05:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 03:09:42.234 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 03:09:42.272 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:09:42.286 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:09:42.307 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 464.5894ms
2025-10-28 03:09:42.310 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:09:42.313 +05:00 [INF] HTTP PATCH /api/Flights/7/status responded 200 in 629.4322 ms
2025-10-28 03:09:42.320 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34 - 200 - application/json;+charset=utf-8 686.4037ms
2025-10-28 03:09:51.644 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34
2025-10-28 03:09:51.649 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:09:51.659 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:09:51.716 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:09:51.723 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 03:09:51.727 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 03:09:51.730 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:09:51.733 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:09:51.735 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 70.9123ms
2025-10-28 03:09:51.736 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 03:09:51.737 +05:00 [INF] HTTP PATCH /api/Flights/7/status responded 200 in 91.0643 ms
2025-10-28 03:09:51.739 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/7/status application/json 34 - 200 - application/json;+charset=utf-8 94.8788ms
2025-10-28 03:34:43.128 +05:00 [INF] Application is shutting down...
2025-10-28 03:56:14.696 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:56:15.559 +05:00 [INF] Executed DbCommand (146ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:56:15.732 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:56:15.766 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:56:15.801 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:56:16.090 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:56:16.267 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:56:16.422 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:56:16.429 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:56:16.431 +05:00 [INF] Hosting environment: Production
2025-10-28 03:56:16.434 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:56:55.204 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 03:56:55.334 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 132.7055ms
2025-10-28 03:56:55.530 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 03:56:55.534 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 3.4255ms
2025-10-28 03:56:55.933 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 03:56:56.104 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 171.1631ms
2025-10-28 03:57:19.042 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71
2025-10-28 03:57:19.097 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:19.129 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:57:19.219 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:57:19.373 +05:00 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:57:19.457 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:57:19.470 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 332.999ms
2025-10-28 03:57:19.473 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:19.479 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 430.6586 ms
2025-10-28 03:57:19.489 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 71 - 200 - application/json;+charset=utf-8 446.9457ms
2025-10-28 03:57:28.332 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 77
2025-10-28 03:57:28.335 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:28.337 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:57:28.390 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:57:28.395 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:57:28.713 +05:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 03:57:28.791 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'AirAstana.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-28 03:57:28.814 +05:00 [ERR] Произошла неизвестная ошибка
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|223_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ОШИБКА
    SqlState: 23503
    MessageText: INSERT или UPDATE в таблице "Users" нарушает ограничение внешнего ключа "FK_Users_Roles_RoleId"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: FK_Users_Roles_RoleId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AirAstana.Infrastructure.Repositories.UserRepository.AddAsync(User user) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Infrastructure\Repositories\UserRepository.cs:line 19
   at AirAstana.Application.Commands.Handler.RegisterUserCommandHandler.Handle(RegisterUserCommand request, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Commands\Handler\RegisterUserCommandHandler.cs:line 43
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 30
   at AirAstana.Presentation.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 39
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:57:28.900 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:57:28.904 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 565.5669ms
2025-10-28 03:57:28.906 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:28.907 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 571.9432 ms
2025-10-28 03:57:28.908 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 77 - 200 - application/json;+charset=utf-8 576.4495ms
2025-10-28 03:57:55.704 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 77
2025-10-28 03:57:55.707 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:55.709 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:57:55.717 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:57:55.720 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:57:55.884 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 03:57:55.919 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:57:55.921 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 210.124ms
2025-10-28 03:57:55.922 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:57:55.923 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 217.8134 ms
2025-10-28 03:57:55.924 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 77 - 200 - application/json;+charset=utf-8 220.3741ms
2025-10-28 03:58:09.067 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 79
2025-10-28 03:58:09.068 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:58:09.069 +05:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AirAstana.Application.DTOs.RegisterRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:58:09.072 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:58:09.075 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:58:09.244 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("PasswordHash", "RoleId", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-10-28 03:58:09.248 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:58:09.249 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation) in 178.5389ms
2025-10-28 03:58:09.251 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Register (AirAstana.Presentation)'
2025-10-28 03:58:09.251 +05:00 [INF] HTTP POST /api/Auth/register responded 200 in 183.5785 ms
2025-10-28 03:58:09.253 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/register application/json 79 - 200 - application/json;+charset=utf-8 186.4459ms
2025-10-28 03:58:17.553 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62
2025-10-28 03:58:17.554 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:58:17.563 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:58:17.574 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:58:17.579 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:58:17.778 +05:00 [ERR] Произошла неизвестная ошибка
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'HS256', the key size must be greater than: '256' bits, key has '192' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at AirAstana.Infrastructure.Services.JwtTokenService.GenerateToken(User user) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Infrastructure\Services\JwtTokenService.cs:line 35
   at AirAstana.Application.Commands.Handler.LoginUserCommandHandler.Handle(LoginUserCommand request, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Commands\Handler\LoginUserCommandHandler.cs:line 51
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestExceptionActionProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPostProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at MediatR.Pipeline.RequestPreProcessorBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken)
   at AirAstana.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Application\Behaviors\ValidationBehavior.cs:line 19
   at AirAstana.Presentation.Controllers.AuthController.Login(LoginRequest request) in C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\Controllers\AuthController.cs:line 57
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextExceptionFilterAsync>g__Awaited|26_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
2025-10-28 03:58:17.787 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:58:17.788 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 222.8887ms
2025-10-28 03:58:17.789 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:58:17.790 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 236.2304 ms
2025-10-28 03:58:17.792 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62 - 200 - application/json;+charset=utf-8 238.5970ms
2025-10-28 03:59:05.143 +05:00 [INF] Application is shutting down...
2025-10-28 03:59:11.065 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:11.516 +05:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:59:11.576 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 03:59:11.596 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 03:59:11.619 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 03:59:11.846 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 03:59:11.948 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 03:59:12.022 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 03:59:12.026 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 03:59:12.027 +05:00 [INF] Hosting environment: Production
2025-10-28 03:59:12.028 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 03:59:15.391 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62
2025-10-28 03:59:15.486 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:59:15.523 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 03:59:15.580 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:15.723 +05:00 [INF] Executed DbCommand (18ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 03:59:15.983 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:59:16.005 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 474.4249ms
2025-10-28 03:59:16.007 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 03:59:16.010 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 563.1902 ms
2025-10-28 03:59:16.017 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62 - 200 - application/json;+charset=utf-8 628.6196ms
2025-10-28 03:59:35.183 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights - -
2025-10-28 03:59:35.259 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:35.265 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:59:35.322 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:35.347 +05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 03:59:35.367 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:59:35.385 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 117.8149ms
2025-10-28 03:59:35.387 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:35.388 +05:00 [INF] HTTP GET /api/Flights responded 200 in 194.2001 ms
2025-10-28 03:59:35.390 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights - - - 200 - application/json;+charset=utf-8 206.7639ms
2025-10-28 03:59:41.400 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT - -
2025-10-28 03:59:41.405 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:41.406 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:59:41.422 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:41.431 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Origin" = @__origin_0
ORDER BY f."Arrival"
2025-10-28 03:59:41.434 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:59:41.436 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 28.4296ms
2025-10-28 03:59:41.438 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:41.439 +05:00 [INF] HTTP GET /api/Flights responded 200 in 37.0222 ms
2025-10-28 03:59:41.441 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT - - - 200 - application/json;+charset=utf-8 41.1448ms
2025-10-28 03:59:44.819 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT&status=1 - -
2025-10-28 03:59:44.827 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:44.829 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:59:44.838 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:44.849 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__origin_0='?', @__status_Value_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE (f."Origin" = @__origin_0) AND (f."Status" = @__status_Value_1)
ORDER BY f."Arrival"
2025-10-28 03:59:44.851 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:59:44.852 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 18.6767ms
2025-10-28 03:59:44.853 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:44.854 +05:00 [INF] HTTP GET /api/Flights responded 200 in 34.0874 ms
2025-10-28 03:59:44.855 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?origin=CIT&status=1 - - - 200 - application/json;+charset=utf-8 36.3299ms
2025-10-28 03:59:49.100 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 03:59:49.101 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:49.102 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:59:49.105 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 03:59:49.111 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__status_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Status" = @__status_Value_0
ORDER BY f."Arrival"
2025-10-28 03:59:49.113 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 03:59:49.114 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 10.4838ms
2025-10-28 03:59:49.116 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 03:59:49.118 +05:00 [INF] HTTP GET /api/Flights responded 200 in 17.0843 ms
2025-10-28 03:59:49.119 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 19.3710ms
2025-10-28 03:59:59.844 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 03:59:59.847 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:59:59.852 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 03:59:59.923 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 03:59:59.926 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 72.244ms
2025-10-28 03:59:59.927 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 03:59:59.928 +05:00 [INF] HTTP POST /api/Flights responded 200 in 81.9758 ms
2025-10-28 03:59:59.930 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 200 - application/json;+charset=utf-8 85.1251ms
2025-10-28 04:00:07.079 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:00:07.081 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:00:07.082 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:00:07.110 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:00:07.225 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 04:00:07.267 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 04:00:07.270 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:00:07.272 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 178.7078ms
2025-10-28 04:00:07.273 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:00:07.274 +05:00 [INF] HTTP POST /api/Flights responded 200 in 193.6308 ms
2025-10-28 04:00:07.275 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 200 - application/json;+charset=utf-8 196.1966ms
2025-10-28 04:00:44.632 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/9/status application/json 34
2025-10-28 04:00:44.633 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 04:00:44.640 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:00:44.665 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:00:44.690 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 04:00:44.693 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:00:44.695 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 52.2725ms
2025-10-28 04:00:44.696 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 04:00:44.697 +05:00 [INF] HTTP PATCH /api/Flights/9/status responded 200 in 64.2043 ms
2025-10-28 04:00:44.698 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/9/status application/json 34 - 200 - application/json;+charset=utf-8 66.8611ms
2025-10-28 04:00:54.289 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/8/status application/json 34
2025-10-28 04:00:54.291 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 04:00:54.299 +05:00 [INF] Route matched with {action = "UpdateStatus", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStatus(Int32, AirAstana.Application.Commands.UpdateFlightStatusCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:00:54.303 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:00:54.310 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Id" = @__p_0
LIMIT 1
2025-10-28 04:00:54.319 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Flights" SET "Arrival" = @p0, "Departure" = @p1, "Destination" = @p2, "Origin" = @p3, "Status" = @p4
WHERE "Id" = @p5;
2025-10-28 04:00:54.324 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 04:00:54.327 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:00:54.328 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation) in 27.0585ms
2025-10-28 04:00:54.329 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.UpdateStatus (AirAstana.Presentation)'
2025-10-28 04:00:54.330 +05:00 [INF] HTTP PATCH /api/Flights/8/status responded 200 in 39.6904 ms
2025-10-28 04:00:54.331 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/8/status application/json 34 - 200 - application/json;+charset=utf-8 42.2770ms
2025-10-28 04:01:12.068 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 64
2025-10-28 04:01:12.071 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:01:12.072 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 04:01:12.091 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:01:12.096 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 04:01:12.260 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:01:12.261 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 179.0368ms
2025-10-28 04:01:12.262 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:01:12.263 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 192.8264 ms
2025-10-28 04:01:12.264 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 64 - 200 - application/json;+charset=utf-8 196.2984ms
2025-10-28 04:01:20.677 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 65
2025-10-28 04:01:20.679 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:01:20.680 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 04:01:20.700 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:01:20.706 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 04:01:20.865 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:01:20.866 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 184.0939ms
2025-10-28 04:01:20.868 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:01:20.870 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 191.3693 ms
2025-10-28 04:01:20.872 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 65 - 200 - application/json;+charset=utf-8 194.4256ms
2025-10-28 04:01:38.319 +05:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5000/api/Flights/8/status application/json 34
2025-10-28 04:01:38.321 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=http://schemas.microsoft.com/ws/2008/06/identity/claims/role and Claim.Value is one of the following values: (Moderator)
2025-10-28 04:01:38.331 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 04:01:38.333 +05:00 [INF] HTTP PATCH /api/Flights/8/status responded 403 in 12.6024 ms
2025-10-28 04:01:38.337 +05:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5000/api/Flights/8/status application/json 34 - 403 0 - 18.6636ms
2025-10-28 04:01:43.579 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:01:43.580 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=http://schemas.microsoft.com/ws/2008/06/identity/claims/role and Claim.Value is one of the following values: (Moderator)
2025-10-28 04:01:43.581 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 04:01:43.583 +05:00 [INF] HTTP POST /api/Flights responded 403 in 3.3101 ms
2025-10-28 04:01:43.586 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 403 0 - 7.7405ms
2025-10-28 04:03:27.757 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 04:03:27.765 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 04:03:27.767 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:03:27.774 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:03:27.775 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 5.8836ms
2025-10-28 04:03:27.776 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 04:03:27.777 +05:00 [INF] HTTP GET /api/Flights responded 200 in 16.5828 ms
2025-10-28 04:03:27.778 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 23.5076ms
2025-10-28 04:03:45.674 +05:00 [INF] Application is shutting down...
2025-10-28 04:03:51.828 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:03:52.291 +05:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 04:03:52.461 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-28 04:03:52.481 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-28 04:03:52.508 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-10-28 04:03:52.714 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS r)
2025-10-28 04:03:52.816 +05:00 [INF] User profile is available. Using 'C:\Users\Yernur\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-28 04:03:52.897 +05:00 [INF] Now listening on: http://localhost:5000
2025-10-28 04:03:52.901 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-28 04:03:52.902 +05:00 [INF] Hosting environment: Production
2025-10-28 04:03:52.904 +05:00 [INF] Content root path: C:\Users\Yernur\Pictures\AirAstana\AirAstana.Presentation\
2025-10-28 04:03:56.058 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - -
2025-10-28 04:03:56.209 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 04:03:56.238 +05:00 [INF] Route matched with {action = "Get", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[System.Int32]) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:03:56.335 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:03:56.489 +05:00 [INF] Executed DbCommand (15ms) [Parameters=[@__status_Value_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
WHERE f."Status" = @__status_Value_0
ORDER BY f."Arrival"
2025-10-28 04:03:56.552 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Collections.Generic.List`1[[AirAstana.Application.DTOs.FlightDto, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:03:56.594 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation) in 350.8176ms
2025-10-28 04:03:56.596 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Get (AirAstana.Presentation)'
2025-10-28 04:03:56.601 +05:00 [INF] HTTP GET /api/Flights responded 200 in 488.7311 ms
2025-10-28 04:03:56.611 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Flights?status=1 - - - 200 - application/json;+charset=utf-8 555.4483ms
2025-10-28 04:04:31.587 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 65
2025-10-28 04:04:31.590 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:04:31.595 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 04:04:31.659 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:04:31.718 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 04:04:31.937 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:04:31.940 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 343.3467ms
2025-10-28 04:04:31.943 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:04:31.944 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 354.6319 ms
2025-10-28 04:04:31.947 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 65 - 200 - application/json;+charset=utf-8 359.6642ms
2025-10-28 04:04:44.499 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62
2025-10-28 04:04:44.504 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:04:44.514 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 04:04:44.521 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:04:44.528 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 04:04:44.705 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:04:44.706 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 190.5065ms
2025-10-28 04:04:44.708 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:04:44.709 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 206.8697 ms
2025-10-28 04:04:44.710 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62 - 200 - application/json;+charset=utf-8 211.2137ms
2025-10-28 04:05:06.778 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:05:06.782 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=http://schemas.microsoft.com/ws/2008/06/identity/claims/role and Claim.Value is one of the following values: (Moderator)
2025-10-28 04:05:06.784 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 04:05:06.785 +05:00 [INF] HTTP POST /api/Flights responded 403 in 5.7335 ms
2025-10-28 04:05:06.788 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 403 0 - 8.9799ms
2025-10-28 04:05:09.887 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:05:09.889 +05:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=http://schemas.microsoft.com/ws/2008/06/identity/claims/role and Claim.Value is one of the following values: (Moderator)
2025-10-28 04:05:09.890 +05:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-28 04:05:09.891 +05:00 [INF] HTTP POST /api/Flights responded 403 in 3.2277 ms
2025-10-28 04:05:09.893 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 403 0 - 5.9791ms
2025-10-28 04:05:15.726 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2025-10-28 04:05:15.780 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 53.5917ms
2025-10-28 04:05:15.835 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.js - -
2025-10-28 04:05:15.837 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.js - - - 200 - application/javascript;charset=utf-8 1.9400ms
2025-10-28 04:05:16.078 +05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2025-10-28 04:05:16.217 +05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 139.2927ms
2025-10-28 04:05:24.386 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62
2025-10-28 04:05:24.387 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:05:24.389 +05:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(AirAstana.Application.DTOs.LoginRequest) on controller AirAstana.Presentation.Controllers.AuthController (AirAstana.Presentation).
2025-10-28 04:05:24.398 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:05:24.403 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."PasswordHash", u."RoleId", u."Username", r."Id", r."Code"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-10-28 04:05:24.568 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:05:24.570 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation) in 179.5264ms
2025-10-28 04:05:24.572 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.AuthController.Login (AirAstana.Presentation)'
2025-10-28 04:05:24.573 +05:00 [INF] HTTP POST /api/Auth/login responded 200 in 186.0340 ms
2025-10-28 04:05:24.575 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Auth/login application/json 62 - 200 - application/json;+charset=utf-8 188.5143ms
2025-10-28 04:05:48.637 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:05:48.640 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:05:48.644 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:05:48.712 +05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType0`4[[System.Boolean, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[AirAstana.Application.Common.HttpCode, AirAstana.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-28 04:05:48.714 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 67.525ms
2025-10-28 04:05:48.716 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:05:48.717 +05:00 [INF] HTTP POST /api/Flights responded 200 in 79.0027 ms
2025-10-28 04:05:48.719 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 200 - application/json;+charset=utf-8 81.7550ms
2025-10-28 04:05:57.043 +05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150
2025-10-28 04:05:57.044 +05:00 [INF] Executing endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:05:57.046 +05:00 [INF] Route matched with {action = "Create", controller = "Flights"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(AirAstana.Application.Commands.AddFlightCommand) on controller AirAstana.Presentation.Controllers.FlightsController (AirAstana.Presentation).
2025-10-28 04:05:57.064 +05:00 [INF] Entity Framework Core 6.0.36 initialized 'AppDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:6.0.29+1cc46a0695f052ba0f1ade7046d577882d351f39' with options: None
2025-10-28 04:05:57.188 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Flights" ("Arrival", "Departure", "Destination", "Origin", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-10-28 04:05:57.232 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Arrival", f."Departure", f."Destination", f."Origin", f."Status"
FROM "Flights" AS f
ORDER BY f."Arrival"
2025-10-28 04:05:57.235 +05:00 [INF] Executing OkObjectResult, writing value of type 'AirAstana.Application.Common.OperationResult`1[[System.Int32, System.Private.CoreLib, Version=6.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-28 04:05:57.237 +05:00 [INF] Executed action AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation) in 188.7643ms
2025-10-28 04:05:57.239 +05:00 [INF] Executed endpoint 'AirAstana.Presentation.Controllers.FlightsController.Create (AirAstana.Presentation)'
2025-10-28 04:05:57.239 +05:00 [INF] HTTP POST /api/Flights responded 200 in 195.3894 ms
2025-10-28 04:05:57.241 +05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Flights application/json 150 - 200 - application/json;+charset=utf-8 198.1026ms
